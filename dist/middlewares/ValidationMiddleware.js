function _0x4e27(){const _0x2790c3=['domain','isBefore','2737130QPNtGu','Appid\x20is\x20required','exports','987gvKNjl','map','object','DuAej','subdomain','Subscription','Subscription\x20is\x20Expired','moment','../utilities/functions/functions','pTeeb','http://','155SwiiTK','MMM\x20DD\x20HH:mm:ss\x20YYYY\x20GMT','headers','save','1324044vBrkID','Origin\x20Not\x20found','gWEkj','body','message','nwjFk','tnDwU','292mctHBE','params','qZosD','subsription','hostname','origin','query','You\x20Are\x20Not\x20Allowed','startDate','9ofLdpM','ZgzPE','rMZlQ','Domain\x20is\x20required','findOne','../utils/errorHandler','../models/User','endDate','18536uLcwdO','log','71157PPafhn','replace','kBiun','Please\x20Subsribe\x20First','47390tQtGva','mongoose','kurDe','unknown','ENXcd','HVXOP','MccWI','join','FnTmv','88295RixYxK','user','4JQfRxL'];_0x4e27=function(){return _0x2790c3;};return _0x4e27();}const _0x3cef68=_0x3d55;(function(_0x3fe4a2,_0x5415c9){const _0x392475=_0x3d55,_0x1485ce=_0x3fe4a2();while(!![]){try{const _0x33fadb=-parseInt(_0x392475(0xc2))/0x1*(-parseInt(_0x392475(0xcd))/0x2)+parseInt(_0x392475(0xe0))/0x3*(parseInt(_0x392475(0xb1))/0x4)+-parseInt(_0x392475(0xaf))/0x5+parseInt(_0x392475(0xc6))/0x6+parseInt(_0x392475(0xb7))/0x7*(-parseInt(_0x392475(0xde))/0x8)+parseInt(_0x392475(0xd6))/0x9*(parseInt(_0x392475(0xa6))/0xa)+parseInt(_0x392475(0xb4))/0xb;if(_0x33fadb===_0x5415c9)break;else _0x1485ce['push'](_0x1485ce['shift']());}catch(_0x43bc53){_0x1485ce['push'](_0x1485ce['shift']());}}}(_0x4e27,0x2b06c));function _0x3d55(_0x29f053,_0x3f02ee){const _0x4e27eb=_0x4e27();return _0x3d55=function(_0x3d5596,_0x59a50f){_0x3d5596=_0x3d5596-0xa5;let _0x25526f=_0x4e27eb[_0x3d5596];return _0x25526f;},_0x3d55(_0x29f053,_0x3f02ee);}const Joi=require('joi'),moment=require(_0x3cef68(0xbe)),{sendResponse:sendResponse}=require('../utils/dataHandler'),{errorHandler:errorHandler}=require(_0x3cef68(0xdb)),{AllowedDomainsModel:AllowedDomainsModel,AllowedWebDomainsModel:AllowedWebDomainsModel}=require('../models/AllowedDomainsModel'),User=require(_0x3cef68(0xdc)),{checkDomainAvailability:checkDomainAvailability}=require(_0x3cef68(0xbf)),{default:mongoose}=require(_0x3cef68(0xa7)),{extractRootDomain:extractRootDomain}=require('../utils'),ValidationMiddleware=_0x18eac8=>(_0x586aae,_0x50e400,_0x4078f6)=>{const _0x4131ca=_0x3cef68,_0x294127={'rMZlQ':function(_0x1d067c){return _0x1d067c();},'HVXOP':function(_0x5c53bf,_0x15aab2,_0x1dc950,_0xfedb0b){return _0x5c53bf(_0x15aab2,_0x1dc950,_0xfedb0b);}};let _0x453c01=0x1f4;try{const _0x3f9a5e={..._0x586aae[_0x4131ca(0xc9)],..._0x586aae[_0x4131ca(0xd3)],..._0x586aae[_0x4131ca(0xce)]},{error:_0x210bb9}=Joi['object'](_0x18eac8)[_0x4131ca(0xa9)](!0x0)['validate'](_0x3f9a5e);if(_0x210bb9){const {details:_0x2c6435}=_0x210bb9,_0x248f97=_0x2c6435[_0x4131ca(0xb8)](_0x46cde5=>_0x46cde5[_0x4131ca(0xca)][_0x4131ca(0xe1)](/"/g,''))['join'](',');throw _0x453c01=0x1a6,new Error(_0x248f97);}_0x294127[_0x4131ca(0xd8)](_0x4078f6);}catch(_0xfdcf33){return _0x294127[_0x4131ca(0xab)](errorHandler,_0x50e400,_0x453c01,_0xfdcf33[_0x4131ca(0xca)]);}},ValidationMiddlewareQuery=_0x4ee7d4=>async(_0x170cda,_0x19ba11,_0x18b02b)=>{const _0x2c7a20=_0x3cef68,_0x2cafaf={'kBiun':function(_0x1b2d44,_0x4593e3,_0x5934fb,_0x5885bf){return _0x1b2d44(_0x4593e3,_0x5934fb,_0x5885bf);}};let _0x3a9a45=0x1f4;try{const _0x57ff93={..._0x170cda['query'],..._0x170cda[_0x2c7a20(0xce)]},{error:_0x5b43ae}=Joi[_0x2c7a20(0xb9)](_0x4ee7d4)[_0x2c7a20(0xa9)](!0x0)['validate'](_0x57ff93);if(_0x5b43ae){const {details:_0x1bd85d}=_0x5b43ae,_0x432f60=_0x1bd85d[_0x2c7a20(0xb8)](_0x28092e=>_0x28092e[_0x2c7a20(0xca)])[_0x2c7a20(0xad)](',');throw _0x3a9a45=0x1a6,new Error(_0x432f60);}_0x18b02b();}catch(_0x320c2f){return _0x2cafaf[_0x2c7a20(0xe2)](errorHandler,_0x19ba11,_0x3a9a45,_0x320c2f[_0x2c7a20(0xca)]);}},AuthDomainMiddleware=async(_0x10906b,_0x46a2df,_0x5e3fc1)=>{const _0x47c40b=_0x3cef68,_0x4da868={'ZgzPE':_0x47c40b(0xd9),'eTLyQ':_0x47c40b(0xb5),'gWEkj':'Domain\x20Not\x20found','ylUOC':function(_0x4b0692){return _0x4b0692();},'ENXcd':function(_0x35236f,_0x10cfcc,_0xd18c3b,_0x70c02c){return _0x35236f(_0x10cfcc,_0xd18c3b,_0x70c02c);}};let _0x6fc01f=0x1f4;try{let _0x1e26ac=_0x10906b[_0x47c40b(0xb0)]?_0x10906b[_0x47c40b(0xb0)]:{};const _0x134782={..._0x10906b[_0x47c40b(0xc9)],..._0x10906b[_0x47c40b(0xd3)],..._0x10906b[_0x47c40b(0xce)],..._0x1e26ac};let {domain:_0x53b6fa,appid:_0x21ecf1}=_0x134782;if(!_0x53b6fa)throw new Error(_0x4da868[_0x47c40b(0xd7)]);let _0x3e5fb5='http://'+_0x53b6fa;const _0x4612ea=new URL(_0x47c40b(0xc1)+_0x53b6fa)[_0x47c40b(0xd1)];if(_0x53b6fa=extractRootDomain(_0x3e5fb5),console['log'](_0x53b6fa),!_0x21ecf1)throw new Error(_0x4da868['eTLyQ']);if(!await checkDomainAvailability(_0x53b6fa))throw _0x6fc01f=0x1a6,new Error(_0x4da868[_0x47c40b(0xc8)]);let _0x27ea95=await User[_0x47c40b(0xda)]({'domain':_0x53b6fa,'appid':_0x21ecf1});if(!_0x27ea95)throw _0x6fc01f=0x193,new Error(_0x47c40b(0xd4));_0x27ea95[_0x47c40b(0xbb)]=_0x4612ea,await _0x27ea95[_0x47c40b(0xc5)](),_0x4da868['ylUOC'](_0x5e3fc1);}catch(_0x4469d6){return console[_0x47c40b(0xdf)](_0x4469d6),_0x4da868[_0x47c40b(0xaa)](errorHandler,_0x46a2df,_0x6fc01f,_0x4469d6[_0x47c40b(0xca)]);}},AuthDomainMiddlewarePackage=async(_0x48e7f9,_0x17515a,_0x47feb6)=>{const _0x4551c7=_0x3cef68,_0x98e9b3={'nwjFk':function(_0x10d2ab,_0x5c6668,_0x5716c5,_0x529e7c){return _0x10d2ab(_0x5c6668,_0x5716c5,_0x529e7c);},'kxZIw':_0x4551c7(0xc7),'tnDwU':function(_0x57fabc,_0x3b61c1){return _0x57fabc(_0x3b61c1);},'DuAej':_0x4551c7(0xb2),'MccWI':_0x4551c7(0xb5),'oVAOq':_0x4551c7(0xd0),'FnTmv':_0x4551c7(0xd4),'kurDe':_0x4551c7(0xa5),'qZosD':function(_0x8a5ce9){return _0x8a5ce9();},'pTeeb':function(_0x52121f,_0x5625b8,_0xcf13e5){return _0x52121f(_0x5625b8,_0xcf13e5);},'RnBXU':function(_0x3c82c4){return _0x3c82c4();}};let _0x352eec=0x1f4;if(!_0x48e7f9[_0x4551c7(0xc4)][_0x4551c7(0xd2)])return _0x98e9b3[_0x4551c7(0xcb)](errorHandler,_0x17515a,0x194,_0x98e9b3['kxZIw']);const _0x2b884c=new URL(_0x48e7f9['headers'][_0x4551c7(0xd2)])[_0x4551c7(0xd1)];let _0x406288=_0x98e9b3[_0x4551c7(0xcc)](extractRootDomain,_0x48e7f9[_0x4551c7(0xc4)][_0x4551c7(0xd2)]);_0x48e7f9[_0x4551c7(0xc9)]['domain']=_0x406288,_0x48e7f9[_0x4551c7(0xc9)][_0x4551c7(0xd1)]=_0x406288;let _0x344393=_0x48e7f9[_0x4551c7(0xb0)]?_0x48e7f9[_0x4551c7(0xb0)]:{};const _0x52a1b5={..._0x48e7f9['body'],..._0x48e7f9[_0x4551c7(0xd3)],..._0x48e7f9[_0x4551c7(0xce)],..._0x344393};let {domain:_0x5b910e,appid:_0x20a528}=_0x52a1b5;try{if(!_0x5b910e)throw _0x352eec=0x190,new Error(_0x4551c7(0xd9));if(console[_0x4551c7(0xdf)](_0x98e9b3[_0x4551c7(0xba)],_0x5b910e),!_0x20a528)throw _0x352eec=0x190,new Error(_0x98e9b3[_0x4551c7(0xac)]);let _0x298795=await User[_0x4551c7(0xda)]({'domain':_0x5b910e,'appid':_0x20a528})['populate'](_0x98e9b3['oVAOq']);if(!_0x298795)throw _0x352eec=0x193,new Error(_0x98e9b3[_0x4551c7(0xae)]);{let _0x488470=_0x298795['subsription'];if(console[_0x4551c7(0xdf)](_0x4551c7(0xbc),_0x488470),!_0x488470)throw _0x352eec=0x190,new Error(_0x98e9b3[_0x4551c7(0xa8)]);if(!_0x488470[_0x4551c7(0xd5)]&&!_0x488470[_0x4551c7(0xdd)])throw _0x352eec=0x190,new Error(_0x98e9b3['kurDe']);const _0x5b6503=_0x98e9b3[_0x4551c7(0xcf)](moment);if(_0x98e9b3[_0x4551c7(0xc0)](moment,_0x488470[_0x4551c7(0xdd)],_0x4551c7(0xc3))[_0x4551c7(0xb3)](_0x5b6503))throw _0x352eec=0x190,new Error(_0x4551c7(0xbd));_0x298795[_0x4551c7(0xbb)]=_0x2b884c,await _0x298795[_0x4551c7(0xc5)](),_0x48e7f9[_0x4551c7(0xb0)]=_0x298795,_0x98e9b3['RnBXU'](_0x47feb6);}}catch(_0x4130f5){return console[_0x4551c7(0xdf)](_0x4130f5),_0x98e9b3['nwjFk'](errorHandler,_0x17515a,_0x352eec,_0x4130f5[_0x4551c7(0xca)]);}};module[_0x3cef68(0xb6)]={'ValidationMiddleware':ValidationMiddleware,'ValidationMiddlewareQuery':ValidationMiddlewareQuery,'AuthDomainMiddleware':AuthDomainMiddleware,'AuthDomainMiddlewarePackage':AuthDomainMiddlewarePackage};