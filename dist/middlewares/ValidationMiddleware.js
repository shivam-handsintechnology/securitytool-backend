const _0x36449d=_0x1098;(function(_0x1d490c,_0xa5db4b){const _0x2a101d=_0x1098,_0x3114f2=_0x1d490c();while(!![]){try{const _0x3a1413=parseInt(_0x2a101d(0x15c))/0x1+parseInt(_0x2a101d(0x17b))/0x2*(parseInt(_0x2a101d(0x179))/0x3)+parseInt(_0x2a101d(0x14d))/0x4+-parseInt(_0x2a101d(0x158))/0x5*(parseInt(_0x2a101d(0x14e))/0x6)+-parseInt(_0x2a101d(0x15e))/0x7*(parseInt(_0x2a101d(0x171))/0x8)+-parseInt(_0x2a101d(0x164))/0x9+parseInt(_0x2a101d(0x170))/0xa;if(_0x3a1413===_0xa5db4b)break;else _0x3114f2['push'](_0x3114f2['shift']());}catch(_0x5a13e7){_0x3114f2['push'](_0x3114f2['shift']());}}}(_0x4fdc,0x743dc));const Joi=require(_0x36449d(0x166)),moment=require(_0x36449d(0x16a)),{sendResponse:sendResponse}=require(_0x36449d(0x160)),{errorHandler:errorHandler}=require(_0x36449d(0x174)),{AllowedDomainsModel:AllowedDomainsModel,AllowedWebDomainsModel:AllowedWebDomainsModel}=require(_0x36449d(0x15b)),User=require('../models/User'),{checkDomainAvailability:checkDomainAvailability}=require(_0x36449d(0x14b)),{default:mongoose}=require('mongoose'),{extractRootDomain:extractRootDomain}=require(_0x36449d(0x161)),ValidationMiddleware=_0x45a741=>(_0x45811b,_0x14a91b,_0x3455a6)=>{const _0x1fc3cf=_0x36449d,_0x162dfc={'astCJ':function(_0x4639b2){return _0x4639b2();},'gGDpk':function(_0x4a623b,_0x5cefa3,_0x3dd460,_0x5462be){return _0x4a623b(_0x5cefa3,_0x3dd460,_0x5462be);}};let _0x6fbed5=0x1f4;try{const _0x58618c={..._0x45811b[_0x1fc3cf(0x175)],..._0x45811b[_0x1fc3cf(0x16b)],..._0x45811b['params']},{error:_0x94d325}=Joi[_0x1fc3cf(0x178)](_0x45a741)['unknown'](!0x0)[_0x1fc3cf(0x17e)](_0x58618c);if(_0x94d325){const {details:_0x5d8d8f}=_0x94d325,_0x23f34f=_0x5d8d8f[_0x1fc3cf(0x148)](_0x5bbf7c=>_0x5bbf7c[_0x1fc3cf(0x165)]['replace'](/"/g,''))[_0x1fc3cf(0x156)](',');throw _0x6fbed5=0x1a6,new Error(_0x23f34f);}_0x162dfc[_0x1fc3cf(0x168)](_0x3455a6);}catch(_0x4ff1f0){return _0x162dfc[_0x1fc3cf(0x14c)](errorHandler,_0x14a91b,_0x6fbed5,_0x4ff1f0[_0x1fc3cf(0x165)]);}},ValidationMiddlewareQuery=_0x117ea2=>async(_0x3a2989,_0x4c9ae0,_0x214b73)=>{const _0x3d44ea=_0x36449d,_0x21026a={'yniYx':function(_0x3e99d2){return _0x3e99d2();},'CVKMu':function(_0x209ef2,_0xfbee1a,_0x3fc4a8,_0x269184){return _0x209ef2(_0xfbee1a,_0x3fc4a8,_0x269184);}};let _0x5156c4=0x1f4;try{const _0x4444ac={..._0x3a2989['query'],..._0x3a2989[_0x3d44ea(0x16f)]},{error:_0x47a481}=Joi['object'](_0x117ea2)['unknown'](!0x0)[_0x3d44ea(0x17e)](_0x4444ac);if(_0x47a481){const {details:_0x4067ea}=_0x47a481,_0xfd7acd=_0x4067ea[_0x3d44ea(0x148)](_0x68c225=>_0x68c225[_0x3d44ea(0x165)])['join'](',');throw _0x5156c4=0x1a6,new Error(_0xfd7acd);}_0x21026a[_0x3d44ea(0x17c)](_0x214b73);}catch(_0x5339cb){return _0x21026a[_0x3d44ea(0x147)](errorHandler,_0x4c9ae0,_0x5156c4,_0x5339cb[_0x3d44ea(0x165)]);}},AuthDomainMiddleware=async(_0x28e1e8,_0x294824,_0x368a09)=>{const _0x59790f=_0x36449d,_0x3c0ac7={'IOoJS':'Domain\x20is\x20required','siLFd':function(_0x209f95,_0x2e6b1a){return _0x209f95(_0x2e6b1a);},'iWvsy':_0x59790f(0x169),'rmkrf':'You\x20Are\x20Not\x20Allowed','jeRpk':function(_0x2b1d57){return _0x2b1d57();},'mYKaR':function(_0x3c35f9,_0x3a2912,_0x31e3cc,_0x15d396){return _0x3c35f9(_0x3a2912,_0x31e3cc,_0x15d396);}};let _0x146dfa=0x1f4;try{let _0x1dd118=_0x28e1e8['user']?_0x28e1e8[_0x59790f(0x153)]:{};const _0x18ff42={..._0x28e1e8[_0x59790f(0x175)],..._0x28e1e8['query'],..._0x28e1e8['params'],..._0x1dd118};let {domain:_0x3720a3,appid:_0x11dee5}=_0x18ff42;if(!_0x3720a3)throw new Error(_0x3c0ac7['IOoJS']);let _0x5edd2c=_0x59790f(0x177)+_0x3720a3;const _0x2509a3=new URL(_0x59790f(0x177)+_0x3720a3)[_0x59790f(0x16c)];if(_0x3720a3=_0x3c0ac7[_0x59790f(0x16e)](extractRootDomain,_0x5edd2c),console[_0x59790f(0x145)](_0x3720a3),!_0x11dee5)throw new Error(_0x59790f(0x17f));if(!await _0x3c0ac7[_0x59790f(0x16e)](checkDomainAvailability,_0x3720a3))throw _0x146dfa=0x1a6,new Error(_0x3c0ac7['iWvsy']);let _0xb3d1ee=await User[_0x59790f(0x172)]({'domain':_0x3720a3,'appid':_0x11dee5});if(!_0xb3d1ee)throw _0x146dfa=0x193,new Error(_0x3c0ac7[_0x59790f(0x144)]);_0xb3d1ee[_0x59790f(0x15d)]=_0x2509a3,await _0xb3d1ee['save'](),_0x3c0ac7['jeRpk'](_0x368a09);}catch(_0x2a9422){return console[_0x59790f(0x145)](_0x2a9422),_0x3c0ac7[_0x59790f(0x173)](errorHandler,_0x294824,_0x146dfa,_0x2a9422[_0x59790f(0x165)]);}},AuthDomainMiddlewarePackage=async(_0x5ab7fa,_0x1d8443,_0x5f5814)=>{const _0x3a81bb=_0x36449d,_0x5c7b43={'bsgXP':function(_0x272fb4,_0x2f9216,_0x501510,_0x59fd1c){return _0x272fb4(_0x2f9216,_0x501510,_0x59fd1c);},'ZzAUN':function(_0x2ddbbb,_0xbe7748){return _0x2ddbbb(_0xbe7748);},'GrOHE':_0x3a81bb(0x17f),'hJcIB':_0x3a81bb(0x167),'DdgTq':_0x3a81bb(0x157),'lFJha':'Please\x20Subsribe\x20First','BnWTy':function(_0x910cb2){return _0x910cb2();},'DrAPx':_0x3a81bb(0x17d),'sRJCc':_0x3a81bb(0x17a),'jNLuG':function(_0x1df6e2,_0x4d5eee,_0x2a5c64,_0x8af73a){return _0x1df6e2(_0x4d5eee,_0x2a5c64,_0x8af73a);}};let _0x3a22d2=0x1f4;if(!_0x5ab7fa[_0x3a81bb(0x16d)][_0x3a81bb(0x149)])return _0x5c7b43[_0x3a81bb(0x176)](errorHandler,_0x1d8443,0x194,_0x3a81bb(0x154));const _0x215412=new URL(_0x5ab7fa[_0x3a81bb(0x16d)]['origin'])[_0x3a81bb(0x16c)];let _0x3ba0d7=_0x5c7b43[_0x3a81bb(0x155)](extractRootDomain,_0x5ab7fa[_0x3a81bb(0x16d)][_0x3a81bb(0x149)]);_0x5ab7fa[_0x3a81bb(0x175)]['domain']=_0x3ba0d7,_0x5ab7fa['body']['hostname']=_0x3ba0d7;let _0x2219bd=_0x5ab7fa[_0x3a81bb(0x153)]?_0x5ab7fa[_0x3a81bb(0x153)]:{};const _0x737b82={..._0x5ab7fa['body'],..._0x5ab7fa['query'],..._0x5ab7fa[_0x3a81bb(0x16f)],..._0x2219bd};let {domain:_0x51291d,appid:_0x5baa47}=_0x737b82;try{if(!_0x51291d)throw _0x3a22d2=0x190,new Error(_0x3a81bb(0x14a));if(console[_0x3a81bb(0x145)]('domain',_0x51291d),!_0x5baa47)throw _0x3a22d2=0x190,new Error(_0x5c7b43[_0x3a81bb(0x152)]);let _0x5dcb79=await User[_0x3a81bb(0x172)]({'domain':_0x51291d,'appid':_0x5baa47})[_0x3a81bb(0x151)](_0x5c7b43[_0x3a81bb(0x159)]);if(!_0x5dcb79)throw _0x3a22d2=0x193,new Error(_0x5c7b43[_0x3a81bb(0x14f)]);{let _0x50b729=_0x5dcb79[_0x3a81bb(0x167)];if(console['log'](_0x3a81bb(0x15a),_0x50b729),!_0x50b729)throw _0x3a22d2=0x190,new Error(_0x5c7b43['lFJha']);if(!_0x50b729[_0x3a81bb(0x162)]&&!_0x50b729['endDate'])throw _0x3a22d2=0x190,new Error(_0x5c7b43['lFJha']);const _0x1a7179=_0x5c7b43['BnWTy'](moment);if(moment(_0x50b729[_0x3a81bb(0x150)],_0x5c7b43['DrAPx'])['isBefore'](_0x1a7179))throw _0x3a22d2=0x190,new Error(_0x5c7b43['sRJCc']);_0x5dcb79[_0x3a81bb(0x15d)]=_0x215412,await _0x5dcb79[_0x3a81bb(0x163)](),_0x5ab7fa[_0x3a81bb(0x153)]=_0x5dcb79,_0x5f5814();}}catch(_0x181830){return console[_0x3a81bb(0x145)](_0x181830),_0x5c7b43[_0x3a81bb(0x146)](errorHandler,_0x1d8443,_0x3a22d2,_0x181830['message']);}};function _0x1098(_0x4dae7d,_0x1a5800){const _0x4fdc20=_0x4fdc();return _0x1098=function(_0x10982d,_0x24cd83){_0x10982d=_0x10982d-0x144;let _0x2bf277=_0x4fdc20[_0x10982d];return _0x2bf277;},_0x1098(_0x4dae7d,_0x1a5800);}function _0x4fdc(){const _0x46e79d=['join','You\x20Are\x20Not\x20Allowed','5mejkjt','hJcIB','Subscription','../models/AllowedDomainsModel','906423YmBYxf','subdomain','9247xFVYwQ','exports','../utils/dataHandler','../utils','startDate','save','1948401XIpncw','message','joi','subsription','astCJ','Domain\x20Not\x20found','moment','query','hostname','headers','siLFd','params','3184780uOPDYY','4832PyfqTv','findOne','mYKaR','../utils/errorHandler','body','bsgXP','http://','object','15RrjcIp','Subscription\x20is\x20Expired','349506AxWzbQ','yniYx','MMM\x20DD\x20HH:mm:ss\x20YYYY\x20GMT','validate','Appid\x20is\x20required','rmkrf','log','jNLuG','CVKMu','map','origin','Domain\x20is\x20required','../utilities/functions/functions','gGDpk','1019896UFwVwu','5178858TJftjQ','DdgTq','endDate','populate','GrOHE','user','Origin\x20Not\x20found','ZzAUN'];_0x4fdc=function(){return _0x46e79d;};return _0x4fdc();}module[_0x36449d(0x15f)]={'ValidationMiddleware':ValidationMiddleware,'ValidationMiddlewareQuery':ValidationMiddlewareQuery,'AuthDomainMiddleware':AuthDomainMiddleware,'AuthDomainMiddlewarePackage':AuthDomainMiddlewarePackage};